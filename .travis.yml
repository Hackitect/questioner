sudo: required

dist: xenial

language: python

python:
  - "3.5"

before script:
 - psql -c "CREATE ROLE questioner with createdb login password 'password123'" postgres
 - psql -c "CREATE DATABASE questioner owner questioner" postgres
 - python3 manage.py create_tables
script: 
 - pytest --cov=app/
 - coveralls

virtualenv:
  system_site_package: true

install:
- pip install -r requirements.txt
- pip install coveralls
after_success:
- coveralls

after_script: cd ~